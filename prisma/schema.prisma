generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Course {
  id                String       @id
  name              String
  description       String
  shortDescription  String
  startDate         DateTime
  endDate           DateTime
  capacity          Int
  enrolled          Int
  category          String
  level             String
  modality          String
  prerequisites     String // Se guarda como "js,html,css"
  imageUrl          String
  creatorId         String
  modules           Module[]
  enrollments       Enrollment[]
  instructors       CourseInstructor[]
}

model Module {
  id          String @id
  name        String
  description String
  url         String
  order       Int
  course      Course @relation(fields: [courseId], references: [id])
  courseId    String
}

model Enrollment {
  id             String   @id
  userId         String
  course         Course   @relation(fields: [courseId], references: [id])
  courseId       String
  enrollmentDate DateTime

  @@map("course_student")
}

model CourseInstructor {
  id       String   @id @default(uuid())
  course   Course   @relation(fields: [courseId], references: [id])
  courseId String
  userId   String
  type     InstructorType

  @@unique([courseId, userId]) // para que no se repita el mismo instructor en un curso
  @@map("courses_instructors")
}

// Enum para los tipos de instructor
enum InstructorType {
  TITULAR
  AUXILIAR
}